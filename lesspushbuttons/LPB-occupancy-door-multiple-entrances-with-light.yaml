blueprint:
  name: LPB - Occupancy and Door Lights in an area with multiples entrances
  description: Turn light on based on detected motion and one door sensor with multiples entrances
  domain: automation
  input:
    occupancy_sensor:
      name: Occupancy Sensor
      description: This sensor will be synchronized with the light.
      selector:
        entity:
          domain: binary_sensor
          device_class: occupancy
    door_sensor:
      name: Door Sensor
      description: This sensor will be synchronized with the light.
      selector:
        entity:
          domain: binary_sensor
          device_class: opening
    target_light:
      name: Lights
      description: The lights to keep in sync.
      selector:
        target:
          entity:
            domain: light
trigger:
  - platform: state
    entity_id: !input "occupancy_sensor"
  - platform: state
    entity_id: !input "door_sensor"
condition: []
action:
  - choose:
      - conditions:
          - condition: state
            entity_id: !input "door_sensor"
            state: "on"
        sequence:
          - service: light.turn_on
            target: !input "target_light"
      - conditions:
          - condition: state
            entity_id: !input "door_sensor"
            state: "off"
          - condition: state
            entity_id: !input "occupancy_sensor"
            state: "on"
        sequence:
          - service: light.turn_on
            target: !input "target_light"
      - conditions:
          - condition: state
            entity_id: !input "door_sensor"
            state: "off"
          - condition: state
            entity_id: !input "occupancy_sensor"
            state: "off"
        sequence:
          - delay: 60
          - service: light.turn_off
            target: !input "target_light"
mode: parallel
